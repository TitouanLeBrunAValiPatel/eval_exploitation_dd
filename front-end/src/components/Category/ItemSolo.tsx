import { useState, useEffect } from 'react';
import { useParams } from 'react-router-dom';

interface ItemData {
    name: string;
    category: { name: string };
    description: string;
    images: { image: string }[];
    price: number;
    stock: number;
}

function ItemSolo() {
    const { category, name, id } = useParams<{ category: string; name: string; id: string; }>();
    const [itemData, setItemData] = useState<ItemData | null>(null);
    useEffect(() => {
        fetch(`http://localhost:8080/api/products/${id}`)
            .then(response => response.json())
            .then(data => {
                setItemData(data);
            })
            .catch(() => {
                console.log('error');
            });
    }, [id, category, name]);

    if (!itemData) {
        return <div>Loading...</div>;
    }

    return (
        <div>
            <h2>{itemData.name}</h2>
            <p>{itemData.category.name}</p>
            <p>{itemData.description}</p>
            <img src={itemData.images && itemData.images[0] ? itemData.images[0].image : ''} alt={itemData.name} />
            <p>Prix: {itemData.price}</p>
            <p>Stock: {itemData.stock}</p>


        </div>
    );
}

export default ItemSolo;