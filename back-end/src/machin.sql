select distinct u1_0.id,u1_0.address,u1_0.city,u1_0.gender,u1_0.mail,u1_0.name,u1_0.password,u1_0.postal_code,u1_0.surname
from users u1_0
join favorite_products fp1_0 on u1_0.id=fp1_0.user_id
join products p1_0 on p1_0.id=fp1_0.product_id
where p1_0.id in (?)
group by u1_0.id
having count(distinct p1_0.id)=?



select distinct u1_0.id,u1_0.name,u1_0.mail,u1_0.password,u1_0.surname,u1_0.gender,u1_0.city,u1_0.address,u1_0.postal_code
from users u1_0
join favorite_products fp1_0 on u1_0.id=fp1_0.user_id
join products p1_0 on p1_0.id=fp1_0.product_id
where (
    select count(distinct fp2_0.product_id)
    from users u2_0
    left join favorite_products fp2_0 on u2_0.id=fp2_0.user_id
    where
        u2_0.id=u2_0.id and
        u1_0.id=u2_0.id)=? and
        p1_0.id in (?,?,?)
    )