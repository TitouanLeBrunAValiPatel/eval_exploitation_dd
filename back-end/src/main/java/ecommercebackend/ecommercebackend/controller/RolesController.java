package ecommercebackend.ecommercebackend.controller;

import ecommercebackend.ecommercebackend.data.entity.database.UserRole;
import ecommercebackend.ecommercebackend.dto.RoleDTO;
import ecommercebackend.ecommercebackend.exception.InvalidIdException;
import ecommercebackend.ecommercebackend.exception.NotfoundException;
import ecommercebackend.ecommercebackend.service.RoleService;
import lombok.RequiredArgsConstructor;
import org.springframework.web.bind.annotation.*;

import java.util.List;

@RestController
@RequestMapping("/api")
@RequiredArgsConstructor
public class RolesController implements CrudController<RoleDTO> {

    private final RoleService roleService;

    @GetMapping("/roles")
    @Override
    public List<RoleDTO> findAllItem() {
        return roleService.getAllItem();
    }

    @GetMapping("/roles/{id}")
    @Override
    public RoleDTO findItemById(@PathVariable("id") int id) throws InvalidIdException, NotfoundException {
        return roleService.getItemById(id);
    }

    @PostMapping("/roles")
    @Override
    public RoleDTO createItem(@RequestBody RoleDTO item) {
        return roleService.addItem(item);
    }

    @PostMapping("/roles/users/{adminId}")
    public UserRole addRoleToUser(@RequestBody UserRole item,@PathVariable int adminId) throws Exception {
        return roleService.addRoleToUser(item,adminId);
    }

    @DeleteMapping("/roles/{id}")
    @Override
    public void removeItemById(@PathVariable("id") int id) {
        roleService.deleteItemById(id);
    }

    @PutMapping("/roles")
    @Override
    public RoleDTO updateItem(@RequestBody RoleDTO item) {
        return roleService.updateItem(item);
    }
}
